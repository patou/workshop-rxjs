<html>

<head>
  <link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="/node_modules/reveal.js/dist/theme/white.css">
  <link rel="stylesheet" href="/node_modules/reveal.js/plugin/highlight/zenburn.css" id="highlight-theme">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h1>RxJS</h1>
        <img src="https://gblobscdn.gitbook.com/spaces%2F-LwY_OXUQHvmdEoy0xNa%2Favatar.png?alt=media" />
        <p>Framework reactif</p>
      </section>
      <section>
        <section>Observable</section>
        <section>
          <p>Programmation reactive est un flux d'évènements, avec un début et une fin (ou erreur)</p>
          <div class="fragment">
            <svg width="684" height="63"
              style="display: block; font-size: 14px; font-family: Arial, sans-serif; dominant-baseline: central; text-anchor: middle; cursor: default; user-select: none;">
              <g transform="translate(0, 11)">
                <g transform="translate(21, 0)">
                  <line x1="0" y1="26" x2="653" y2="26" stroke-width="2" stroke="rgba(0, 0, 0, 0.2)"
                    style="shape-rendering: crispedges;"></line>
                  <line x1="0" y1="26" x2="522.9224" y2="26" stroke-width="2" stroke="#000000"
                    style="shape-rendering: crispedges;"></line>
                  <path transform="translate(653, 21)" d="M0 0 L10 5 L0 10 z" fill="rgba(0, 0, 0, 0.2)"
                    style="transition: fill 0.2s ease-in-out 0s;"></path>
                  <line x1="522.9223999999999" y1="3.5" x2="522.9223999999999" y2="48.5" stroke-width="2"
                    stroke="#000000" style="opacity: 1; transition: opacity 0.5s ease-in-out 0s;"></line>
                  <g>
                    <g
                      style="transform: translate(130.731px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                      <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                        y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">0</text>
                    </g>
                    <g
                      style="transform: translate(261.331px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                      <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                        y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">1</text>
                    </g>
                    <g
                      style="transform: translate(391.931px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                      <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                        y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">2</text>
                    </g>
                    <g
                      style="transform: translate(522.661px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                      <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                        y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">3</text>
                    </g>
                  </g>
                </g>
              </g>
              <g style="text-anchor: start; dominant-baseline: text-before-edge;"></g>
            </svg>
          </div>
          <div class="fragment">
            <svg width="804" height="63"
              style="display: block; font-size: 14px; font-family: Arial, sans-serif; dominant-baseline: central; text-anchor: middle; cursor: default; user-select: none;">
              <g transform="translate(0, 11)">
                <g transform="translate(21, 0)">
                  <line x1="0" y1="26" x2="773" y2="26" stroke-width="2" stroke="rgba(0, 0, 0, 0.2)"
                    style="shape-rendering: crispedges;"></line>
                  <line x1="0" y1="26" x2="618.4" y2="26" stroke-width="2" stroke="#000000"
                    style="shape-rendering: crispedges;"></line>
                  <path transform="translate(773, 21)" d="M0 0 L10 5 L0 10 z" fill="rgba(0, 0, 0, 0.2)"
                    style="transition: fill 0.2s ease-in-out 0s;"></path>
                    <g>
                      <g
                        style="transform: translate(130.731px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                        <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                          y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">0</text>
                      </g>
                      <g
                        style="transform: translate(261.331px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                        <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                          y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">1</text>
                      </g>
                      <g
                        style="transform: translate(391.931px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                        <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                          y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">2</text>
                      </g>
                      <g
                        style="transform: translate(522.661px, 26px) scale(1); transition: transform 0.5s ease-in-out 0s;">
                        <circle cx="0" cy="0" r="15" stroke-width="2" stroke="#000000" fill="#ffffff"></circle><text x="0"
                          y="0" style="fill: rgb(0, 0, 0); dominant-baseline: central;">3</text>
                      </g>
                    </g>
                  <g style="opacity: 1; transition: opacity 0.5s ease-in-out 0s;">
                    <line x1="609.4000000000001" y1="17" x2="627.4000000000001" y2="35" stroke-width="2"
                      stroke="#000000"></line>
                    <line x1="609.4000000000001" y1="35" x2="627.4000000000001" y2="17" stroke-width="2"
                      stroke="#000000"></line>
                    <rect x="609.4000000000001" y="17" width="18" height="18" fill="transparent"></rect>
                  </g>
                </g>
              </g>
              <g style="text-anchor: start; dominant-baseline: text-before-edge;"></g>
            </svg>
          </div>
        </section>
        <section>
          <h3>Exemple de flux</h3>
          <ul>
            <li class="fragment">Clic sur un bouton</li>
            <li class="fragment">Requete HTTP</li>
            <li class="fragment">Connexion/déconnexion d'un utilisateur</li>
            <li class="fragment">Saisie dans un champs texte</li>
            <li class="fragment">Changement des paramètres de l'url</li>
            <li class="fragment">Horloge</li>
          </ul>
        </section>
        <section>
          <h1>Observable</h1>
          <p class="fragment">Emet des évènements</p>
          <p class="fragment">Permet de s'abonner aux évènements</p>
          <p class="fragment">Notifie tous ceux qui se sont abonné lorsqu'il envoie un évènement</p>
        </section>
        <section>
          <h3>Trois états</h3>
          <ul>
            <li>Next: Nouvel élément dans le flux</li>
            <li>Complete: Le flux est terminé</li>
            <li>Error: Le flux est terminé par une erreur</li>
          </ul>
        </section>
        <section>
          <pre><code data-trim data-noescape>
            const source = Observable.create((observer) => {
              observer.next('Bonjour');
              observer.next('le monde !');
              observer.error(new Error('Erreur. :/'));
              observer.complete();
            });
            </code></pre>
        </section>
        <section>
          <h3>S'abonner à un observable</h3>
          <pre><code data-trim data-noescape>
            source.subscribe(
              (data) => displayMessage(data),
              (error) => console.error('error', error),
              () => console.log('complete')
            )
            </code></pre>
        </section>
        <section>
          <h3>of</h3>
          <pre><code data-trim data-noescape>
            of(1, 2, 3, 4, 5)
            </code></pre>
          <p>Crée un observable sur plusieurs valeurs statique (utile pour les test, ou envoyer une valeur unique)</p>
        </section>
        <section>
          <h3>interval</h3>
          <pre><code data-trim data-noescape>
            interval(1000)
            </code></pre>
          <p>Envoi un nombre qui s'incrémente toute les 1000 ms (1 seconde)</p>
        </section>
        <section>
          <h3>fromEvent</h3>
          <pre><code data-trim data-noescape>
            fromEvent(button, 'click')
            </code></pre>
          <p>S'abonne à un évènement DOM</p>
        </section>
      </section>
      <section>
        <section>Subject</section>
        <section>
          <h3>Subject</h3>
          <img src="img/S.PublishSubject.png" class="r-stretch"/>
          <p class="fragment">Observable qui expose l'API Observer (méthodes next, complete, error)</p>
        </section>
        <section>
          <h3>BehaviorSubject</h3>
          <img src="img/S.BehaviorSubject.png" class="r-stretch"/>
          <p class="fragment">Lorsque l'on subscribe, on récupère la dernière valeur ou la valeur par défaut</p>
        </section>
        <section>
          <h3>ReplaySubject</h3>
          <img src="img/S.ReplaySubject.png" class="r-stretch"/>
          <p class="fragment">Lorsque l'on subscribe, on récupère toutes les valeurs déjà envoyé dans le flux</p>
        </section>
        <section>
          <h3>AsyncSubject</h3>
          <img src="img/S.AsyncSubject.png" class="r-stretch"/>
          <p class="fragment">On reçoit simplement la dernière valeur lorsque le flux est finit</p>
        </section>
      </section>
      <section>
        <section>Operators</section>
        <section>
          <pre><code data-trim data-noescape>
                of(1, 2, 3, 4, 5)
                .pipe(
                    filter(x => x % 2 === 0),
                    map(x => x + 1),
                )
                .subscribe(console.log);
                </code></pre>
        </section>
        <section>
          <h3>Operateur</h3>
          <ul>
            <li class="fragment">Permet de faire des modifications sur les donneés du flux</li>
            <li class="fragment">Un opérateur s'abonne à un observable et retourne un autre observable</li>
            <li class="fragment">Les opérateurs sont enchainné par la méthode pipe(op1(), op2(), ...)</li>
          </ul>
        </section>
        <section>
          <h3>Map</h3>
          <img src="img/map.png" class="r-stretch"/>
          <p class="fragment">Applique une fonction de transformation à chaque élément du flux</p>
        </section>
        <section>
          <h3>Filter</h3>
          <img src="img/filter.png" class="r-stretch"/>
          <p class="fragment">Ne laisse passer dans le flux que les élément qui valident la condition</p>
        </section>
        <section>
          <h3>Scan</h3>
          <img src="img/scan.png" class="r-stretch"/>
          <p class="fragment">Reduit au fur et mesure la donnée avec un accumulateur (identique que reduce, sauf que reduce envoie à la fin le résultat)</p>
        </section>
        <section>
          <h3>Take</h3>
          <img src="img/take.png" class="r-stretch"/>
          <p class="fragment">Prend x élément et arrête le flux</p>
        </section>
        <section>
          <h3>TakeWhile</h3>
          <img src="img/takeWhile.png" class="r-stretch"/>
          <p class="fragment">Prend les élément tant que la condition est vrai</p>
        </section>
        <section>
          <h3>Merge</h3>
          <img src="img/merge.png" class="r-stretch"/>
          <p class="fragment">Merge plusieurs flux dans un seul flux</p>
        </section>
        <section>
          <h3>Créer un opérateur custom</h3>
          <pre><code data-trim data-noescape>
            const plusX = (x: number) => source$ => Observable.create(observer =>
              source$.subscribe(
                value => {
                  observer.next(value + x);
                },
                err => observer.error(err),
                () => observer.complete()
              )
            );
            </code></pre>
        </section>
        <section>
          <h3>Créer un opérateur custom</h3>
          <pre><code data-trim data-noescape>
            const plusX = (x: number) => map(value => value + 1);
            </code></pre>
        </section>
      </section>
      <section>
        <section>TP</section>
        <section>
          <h1>Utilisation du site <a href="https://rxviz.com">rxviz.com</a></h1>
          <p class="fragment">Ce site permet de visualiser des flux rxjs, et écrire son propre code</p>
          <p class="fragment">Présente déjà des exemples utilisable</p>
        </section>
        <section>
          <p>Faire les imports</p>
          <pre><code data-trim data-noescape>
            const { interval } = Rx;
            const { map } = RxOperators;
            // Equivalent à 
            import { interval } from 'rxjs';
            import { map } from 'rxjs/operators';
            </code></pre>
        </section>
        <section>
          <p class="fragment">Pour une visualisation, il faut utiliser l'observable interval</p>
          <p class="fragment">La dernière ligne doit retourner un observable (l'outil fait un subscribe)</p>
          <pre><code data-trim data-noescape>
            const { interval } = Rx;
            const { map } = RxOperators;
            
            interval(1000) // Envoi toutes les secondes un nombre qui s'autoincrémente
            .pipe(
              map(x => x + 1) // les opérateurs que l'on fait
            )
            </code></pre>
        </section>
        <section>
          <h2>TP1) Compteur</h2>
          <a href="https://rxviz.com/examples/custom">Partir de ce code</a>
          <p class="fragment">Faire un conteur de 5 valeur (1, 2, 3, 4, 5) </p>
          <p class="fragment">Ne garder que les nombres paire <span style="font-family: monospace;background-color: lightgrey;">% 2 === 2</span>)</p>
          <p class="fragment">Multiplier le code par 2</p>
        </section>
        <section>
          <h2>TP2) Autocomplétion</h2>
          <a href="https://rxviz.com/examples/input-element">Partir de ce code</a>
          <p class="fragment">S'abonner à champ input et émettre les caractères (déjà fait)</p>
          <p class="fragment">Agréger les caractères en des mots</p>
          <p class="fragment">N'envoyer un élèment que toutes les secondes</p>
          <p class="fragment">Arrêter le flux lorsque que l'on tappe Enter</p>
        </section>
        <section>
          <h3>Solution TP 1</h3>
          <pre><code data-trim data-noescape>
const { interval } = Rx;
const { take, map, filter } = RxOperators;
  
interval(1000)
.pipe(
  take(5),
  filter(x => x % 2 === 0),
  map(x => x * 2)
  );
            </code></pre>
        </section>
        <section>
          <h3>Solution TP 2</h3>
          <pre><code data-trim data-noescape>
const { fromEvent } = Rx;
const { map, filter, scan, debounceTime, takeWhile } = RxOperators;

const input = document.createElement('input');
input.setAttribute('placeholder', 'Type something');
output.prepend(input);
input.focus();

fromEvent(input, 'keydown').pipe(
  map(e => e.key),
  takeWhile(key => key !== 'Enter'),
  filter(key => key !== ' '),
  scan((acc, valeur) => acc + valeur),
  debounceTime(1000)
)
            </code></pre>
        </section>
      </section>
      <section>
        <h3>Liens</h3>
        <ul>
          <li class="fragment"><a href="http://reactivex.io/">reactivex.io</a></li>
          <li class="fragment"><a href="https://www.learnrxjs.io/">learnrxjs.io</a></li>
          <li class="fragment"><a href="https://rxmarbles.com/">rxmarbles.com</a></li>
          <li class="fragment"><a href="https://rxviz.com/">rxviz.com</a></li>
          <li class="fragment"><a href="https://reactive.how/">reactive.how</a></li>
          <li class="fragment"><a href="https://www.julienpradet.fr/tutoriels/introduction-a-rxjs/">Intro par Julien Pradet</a></li>
        </ul>
      </section>
    </div>
  </div>
  <script src="/node_modules/reveal.js/dist/reveal.js"></script>
  <script src="/node_modules/reveal.js/plugin/highlight/highlight.js"></script>
  <script>
    Reveal.initialize({
      slideNumber: true,
      hash: true,
      plugins: [RevealHighlight]
    });
  </script>
</body>

</html>